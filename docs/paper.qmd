---
title: "Household Enterprise Entry as a Coping Mechanism Under Agricultural Price Shocks: An Agent-Based Model Calibrated to LSMS-ISA Panel Data"
author:
  - name: "Michael Bean"
    affiliation: "Independent Researcher"
date: "2026-01-14"
format:
  html:
    toc: true
    toc-depth: 3
    number-sections: true
    code-fold: true
    code-summary: "Show code"
    theme: cosmo
    fig-width: 8
    fig-height: 5
    self-contained: true
  pdf:
    toc: true
    toc-depth: 3
    number-sections: true
    documentclass: article
    geometry: margin=1in
    fontsize: 11pt
    fig-width: 6.5
    fig-height: 4
    keep-tex: false
bibliography: ../references.bib
execute:
  warning: false
  message: false
  echo: false
crossref:
  fig-prefix: "Figure"
  tbl-prefix: "Table"
  eq-prefix: "Equation"
abstract: |
  This paper presents an agent-based model (ABM) investigating household enterprise entry as a coping mechanism in response to agricultural price shocks in Sub-Saharan Africa. Using household panel data from the Living Standards Measurement Study - Integrated Surveys on Agriculture (LSMS-ISA) for Tanzania and Ethiopia, we calibrate distributional parameters for assets, price exposure, and credit access. The model implements household agents that make enterprise participation decisions based on rule-based policies, with an LLM-augmented decision architecture designed for future evaluation. Through parameter sweeps and behavior exploration across calibrated synthetic households, we examine the sensitivity of enterprise dynamics to policy thresholds. Our findings demonstrate that the ABM reproduces key patterns observed in the empirical data, including enterprise prevalence trends and path-dependent household trajectories. We discuss the model's limitations, including the absence of agent-agent interactions and the exploratory nature of the current computational analysis, and outline directions for more rigorous validation.
---

```{r setup}
#| include: false

# Load required packages
suppressPackageStartupMessages({
  library(ggplot2)
  library(dplyr)
  library(tidyr)
  library(arrow)
  library(fixest)
  library(gt)
  library(scales)
  library(knitr)
  library(here)
})

# Source custom theme
source(here("R", "plot_theme.R"))

# Source analysis helpers
source(here("R", "analysis_helpers.R"))

# Source validation helpers
source(here("analysis", "R", "read_simulation.R"))
source(here("analysis", "R", "validation_helpers.R"))

# Set global options
opts_chunk$set(
  fig.align = "center",
  out.width = "100%"
)

# Define paths relative to project root
OUTPUT_BASE <- here("outputs")
DATA_BASE <- here("data", "processed")
CALIBRATION_PATH <- here("artifacts", "calibration", "tanzania", "calibration.json")

# Helper function to check if data exists
data_exists <- function(path) {
  file.exists(path) || dir.exists(path)
}
```

# Introduction {#sec-introduction}

Agricultural price volatility poses significant risks to rural households in developing economies. When cash crop prices decline, households face reduced income and may adopt various coping strategies to smooth consumption [@dercon2002income]. One such strategy is enterprise entry---the initiation of non-farm business activities as an alternative income source. Understanding the dynamics of enterprise entry under price shocks has important implications for rural development policy and poverty reduction strategies.

This paper develops an agent-based model (ABM) to investigate the relationship between agricultural price shocks and household enterprise participation in Sub-Saharan Africa. The model is calibrated to household panel data from the Living Standards Measurement Study - Integrated Surveys on Agriculture (LSMS-ISA) for Tanzania (2008-2014) and Ethiopia (2011-2015) [@lsmsisa].

**Research Question:** Do negative agricultural price shocks induce enterprise entry as a coping mechanism, and how do household characteristics (assets, credit access) mediate this relationship?

**Contributions:** This work makes three contributions to the literature:

1. **Calibrated Microsimulation:** We develop a generative microsimulation approach where distributional parameters (assets, shocks, credit) are fitted from empirical data, enabling synthetic panel generation that preserves key statistical properties.

2. **Pattern-Oriented Validation:** Following Pattern-Oriented Modeling principles [@grimm2010odd; @railsback2019agent], we validate the model against multiple empirical patterns rather than single metrics.

3. **LLM-Augmented Policy Architecture:** We design (but do not yet execute) an architecture for LLM-based household decision-making, contributing to the emerging literature on AI-augmented social simulation.

**Scope and Limitations:** The current model does not include direct agent-agent interactions; households respond independently to shared exogenous price shocks. Aggregate patterns emerge from heterogeneous individual responses, not from complex adaptive dynamics. This design choice reflects the empirical setting where household enterprise decisions are primarily driven by household-level factors rather than social network effects.

# Related Work {#sec-related-work}

## Agent-Based Models in Development Economics

Agent-based modeling provides a framework for exploring heterogeneous responses to policy interventions and external shocks [@macal2010tutorial; @gilbert2008agent]. In agricultural and development economics, ABMs have been used to study land use change, technology adoption, and rural-urban migration. Our work contributes to this literature by focusing specifically on enterprise coping strategies under price volatility.

## Coping Strategies and Enterprise Entry

The theoretical foundation for our model draws on the coping strategies literature [@dercon2002income], which distinguishes between ex-ante risk management (diversification, insurance) and ex-post coping mechanisms (asset sales, enterprise entry). Enterprise entry as coping behavior represents a productive response to income shocks that may have persistent effects on household welfare.

## Model Validation and Calibration

We follow the ODD (Overview, Design concepts, Details) protocol for model documentation [@grimm2006standard; @grimm2010odd; @grimm2020odd] and Pattern-Oriented Modeling principles for calibration [@railsback2019agent]. This approach emphasizes reproducing multiple empirical patterns rather than fitting single parameters.

# Data {#sec-data}

## LSMS-ISA Panel Data

The model is calibrated using the Living Standards Measurement Study - Integrated Surveys on Agriculture (LSMS-ISA) harmonized panel data [@lsmsisa]. We use:

- **Tanzania:** 4 waves (2008-2014), N=500 households
- **Ethiopia:** 3 waves (2011-2015), N=500 households

The data include household-level information on enterprise participation, asset holdings, credit access, and agricultural production. Price exposure is computed from household crop portfolios and regional price indices.

## Data Processing and Derived Variables

Derived target variables include:

- **Enterprise indicator:** Binary (0/1) for non-farm enterprise operation
- **Asset index:** Standardized index of durable assets
- **Credit access:** Binary indicator for formal credit access
- **Price exposure:** Weighted average of crop-specific price changes

See `docs/DATA_CONTRACT.md` for the full schema specification and `docs/DATA_AUDIT.md` for provenance documentation.

## Calibration Artifact

Distribution parameters are fitted from the LSMS data and stored in a calibration artifact (`artifacts/calibration/tanzania/calibration.json`). Key fitted distributions:

```{r}
#| label: tbl-calibration
#| tbl-cap: "Calibration parameters fitted from LSMS-ISA Tanzania data. Asset distribution uses normal family; shock distribution uses normal family. K-S goodness-of-fit tests fail due to heavy-tailed asset data (see Limitations)."

if (file.exists(CALIBRATION_PATH)) {
  cal <- jsonlite::fromJSON(CALIBRATION_PATH)

  cal_summary <- data.frame(
    Variable = c("Assets (raw)", "Price Exposure", "Credit Rate", "Enterprise Prevalence"),
    Distribution = c("Normal", "Normal", "Logistic model", "Empirical"),
    `Mean/Rate` = c(
      sprintf("%.0f", cal$assets_distribution$params$mean),
      sprintf("%.3f", cal$shock_distribution$params$mean),
      sprintf("%.1f%%", cal$enterprise_baseline$prevalence * 100 * 0.38 / 0.38),
      sprintf("%.1f%%", cal$enterprise_baseline$prevalence * 100)
    ),
    `SD/Coef` = c(
      sprintf("%.0f", cal$assets_distribution$params$std),
      sprintf("%.3f", cal$shock_distribution$params$std),
      sprintf("%.2e", cal$credit_model$coefficients$asset_index),
      "---"
    ),
    `K-S p-value` = c(
      sprintf("%.2e", cal$assets_distribution$goodness_of_fit$p_value),
      sprintf("%.2e", cal$shock_distribution$goodness_of_fit$p_value),
      "---",
      "---"
    )
  )

  knitr::kable(cal_summary, align = "lllll")
} else {
  cat("Calibration artifact not found. Run: `abm calibrate --country tanzania`")
}
```

**Note on K-S Tests:** The Kolmogorov-Smirnov tests reject the null hypothesis of distributional fit. This is expected for heavy-tailed economic data with large sample sizes [@clauset2009power]. Visual inspection (QQ-plots in Appendix) and moment-matching suggest the normal approximation captures the central tendency adequately for our simulation purposes, though future work should explore alternative distributional families.

# Model {#sec-model}

## Overview (ODD Protocol)

The model follows the ODD+D protocol [@grimm2020odd]. This section provides a summary; the full ODD description is in Appendix A.

### Purpose

The model investigates the relationship between agricultural price shocks and household enterprise entry, with heterogeneous responses by asset holdings and credit access. Households are classified as "stayers" (persistent entrepreneurs, >50% waves) or "copers" (intermittent responders).

### Entities, State Variables, and Scales

**Primary Entity:** HouseholdAgent

| Variable | Type | Description |
|----------|------|-------------|
| `household_id` | string | Unique identifier |
| `wave` | int | Survey wave (1-4) |
| `assets` | float | Standardized asset index |
| `credit_access` | int | Binary credit access |
| `enterprise_status` | int | Binary enterprise status |
| `price_exposure` | float | Price shock exposure |
| `classification` | string | stayer/coper/none |

: Household agent state variables. {#tbl-state-vars}

**Temporal Scale:** Discrete time steps corresponding to survey waves (~2-year intervals).

**Spatial Scale:** No explicit spatial structure; agents respond independently to shared price distributions.

### Process Overview

Each simulation step:

1. Environment update: Price shock distribution for current wave
2. Agent activation: All agents in random order
3. Decision: Each agent queries policy for action
4. State update: Agent applies action (ENTER/EXIT/NO_CHANGE)
5. Data collection: Outcomes recorded

## Design Concepts

### Heterogeneity Without Interaction

Agents differ in assets, credit access, and initial enterprise status. These differences produce heterogeneous responses to common exogenous shocks. However, agents do not directly interact; there are no network effects, peer influences, or market feedback loops in the current implementation.

This design choice reflects our focus on household-level coping decisions rather than social contagion or general equilibrium effects. Aggregate patterns (enterprise prevalence, classification distributions) arise from the aggregation of heterogeneous individual responses [@epstein2008why].

### Stochasticity

Sources of stochasticity include:
- Price shock draws from calibrated distributions
- Asset initialization (synthetic mode)
- Agent activation order (Mesa RandomActivation)

Centralized RNG with recorded seeds ensures reproducibility.

## Decision Policies

### Rule-Based Policy (Executed)

The baseline `RulePolicy` implements deterministic threshold-based decisions:

- **Enter:** `price_exposure < price_threshold` AND `assets > asset_threshold` AND NOT currently in enterprise
- **Exit:** `assets < exit_threshold` AND currently in enterprise
- **No Change:** Otherwise

### LLM-Augmented Policy (Design Only)

We have designed a `MultiSampleLLMPolicy` architecture for future evaluation. Key features:

- K samples at temperature T (default: K=5, T=0.6)
- Constraint validation for feasibility
- Majority vote aggregation with conservative tie-break
- State-based caching for reproducibility

**This policy has not been executed.** All empirical results in this paper use the rule-based policy. See Discussion for planned LLM evaluation.

## Architecture

```{mermaid}
%%| fig-cap: "System architecture showing data flow from LSMS ingestion through calibration, simulation, and evaluation."
%%| label: fig-architecture
flowchart TB
    subgraph DataPipeline["Data Pipeline"]
        LSMS["LSMS-ISA Data"]
        ETL["ETL Module"]
        Calibrate["Calibration"]
        CalJSON["calibration.json"]
    end

    subgraph ABMCore["ABM Core (Mesa 3)"]
        SynthGen["Synthetic Panel Generator"]
        Model["EnterpriseCopingModel"]
        Agents["HouseholdAgents"]
        Policy["RulePolicy"]
    end

    subgraph Outputs["Outputs"]
        Outcomes["household_outcomes.parquet"]
        Manifest["manifest.json"]
    end

    LSMS --> ETL
    ETL --> Calibrate
    Calibrate --> CalJSON
    CalJSON --> SynthGen
    SynthGen --> Model
    Model --> Agents
    Agents --> Policy
    Policy --> Outcomes
    Model --> Manifest
```

# Experimental Design {#sec-experimental-design}

## Baseline Scenario

The baseline scenario uses LSMS-derived household data with the RulePolicy:

- **Country:** Tanzania
- **N:** 500 households
- **Waves:** 4 (matching LSMS structure)
- **Seed:** 42
- **Policy:** RulePolicy with default thresholds

## Parameter Sweeps

We conducted parameter sweeps over calibrated synthetic households to examine sensitivity:

- **Grid:** 6×6 (price_threshold × asset_threshold)
- **Price threshold range:** [-0.3, 0.0]
- **Asset threshold range:** [-1.0, 1.0]
- **Seeds per cell:** 2
- **N per run:** 100 households
- **Total runs:** 72

**Data source:** Calibrated synthetic (`SyntheticPanelGenerator` with `CalibrationArtifact`)

## Behavior Exploration

We conducted random search over parameter space:

- **Candidates:** 40
- **Seeds per candidate:** 2
- **Objective:** MSE between simulated and LSMS-derived enterprise rates

**Target enterprise rates (LSMS-derived):**

- Wave 1: 19.6%
- Wave 2: 26.0%
- Wave 3: 28.6%
- Wave 4: 28.4%

# Results {#sec-results}

## Pattern Validation (LSMS-Derived Baseline)

### Enterprise Prevalence

```{r}
#| label: fig-enterprise-prevalence
#| fig-cap: "Enterprise rates by wave from LSMS-derived baseline simulation (Tanzania, N=500, seed=42). The model reproduces the increasing trend observed in LSMS data. Data source: outputs/tanzania/baseline/"

tz_baseline_path <- file.path(OUTPUT_BASE, "tanzania", "baseline")

if (data_exists(file.path(tz_baseline_path, "household_outcomes.parquet"))) {
  tz_sim <- read_simulation(tz_baseline_path)

  by_wave <- tz_sim$outcomes |>
    group_by(wave) |>
    summarize(
      enterprise_rate = mean(as.numeric(enterprise_status), na.rm = TRUE),
      n = n(),
      .groups = "drop"
    )

  ggplot(by_wave, aes(x = factor(wave), y = enterprise_rate)) +
    geom_col(fill = "#0072B2", alpha = 0.8) +
    geom_text(aes(label = sprintf("%.1f%%", enterprise_rate * 100)),
              vjust = -0.5, size = 3.5) +
    scale_y_continuous(labels = percent_format(), limits = c(0, 0.5)) +
    labs(
      x = "Survey Wave",
      y = "Enterprise Rate"
    ) +
    theme_abm_minimal()
} else {
  cat("**Baseline data not available.** Run: `make run-sim COUNTRY=tanzania`")
}
```

### Household Classification

```{r}
#| label: fig-classification
#| fig-cap: "Distribution of household classifications based on enterprise persistence. Stayers (>50% waves with enterprise) represent persistent entrepreneurs; copers show intermittent participation; none never operate enterprise. Data source: outputs/tanzania/baseline/"

if (exists("tz_sim") && !is.null(tz_sim)) {
  class_data <- tz_sim$outcomes |>
    distinct(household_id, classification) |>
    count(classification) |>
    mutate(pct = n / sum(n))

  ggplot(class_data, aes(x = classification, y = pct, fill = classification)) +
    geom_col(alpha = 0.8) +
    geom_text(aes(label = sprintf("%.1f%%\n(n=%d)", pct * 100, n)),
              vjust = -0.3, size = 3.5) +
    scale_fill_manual(values = classification_colors(), guide = "none") +
    scale_y_continuous(labels = percent_format(), limits = c(0, 1)) +
    labs(
      x = "Classification",
      y = "Proportion of Households"
    ) +
    theme_abm_minimal()
}
```

### Path Dependence

```{r}
#| label: tbl-transitions
#| tbl-cap: "Transition matrix showing enterprise status persistence. High diagonal values indicate path dependence: households tend to maintain their enterprise status across waves. Data source: outputs/tanzania/baseline/"

if (exists("tz_sim") && !is.null(tz_sim)) {
  trans_df <- tz_sim$outcomes |>
    arrange(household_id, wave) |>
    group_by(household_id) |>
    mutate(
      next_status = lead(enterprise_status),
      current = ifelse(enterprise_status == 1, "In Enterprise", "Not in Enterprise"),
      next_state = ifelse(next_status == 1, "In Enterprise", "Not in Enterprise")
    ) |>
    filter(!is.na(next_status)) |>
    ungroup()

  trans_matrix <- trans_df |>
    count(current, next_state) |>
    group_by(current) |>
    mutate(prob = n / sum(n)) |>
    select(-n) |>
    pivot_wider(names_from = next_state, values_from = prob, values_fill = 0) |>
    ungroup()

  trans_matrix |>
    gt(rowname_col = "current") |>
    fmt_percent(columns = everything() & !matches("current"), decimals = 1) |>
    tab_header(title = "Transition Probabilities (Current → Next Wave)")
}
```

## Parameter Sensitivity (Calibrated Synthetic)

### Policy Threshold Heatmap

```{r}
#| label: fig-heatmap
#| fig-cap: "Enterprise rate sensitivity to policy thresholds. Heatmap shows mean enterprise rate across 6×6 parameter grid (2 seeds per cell). Lower price thresholds require stronger negative shocks to trigger entry. Data source: outputs/sweeps/calibrated/sweep_agg_latest.parquet"

sweep_path <- here::here("outputs", "sweeps", "calibrated", "sweep_agg_latest.parquet")

if (file.exists(sweep_path)) {
  sweep_df <- arrow::read_parquet(sweep_path) |>
    rename(enterprise_rate = enterprise_rate_mean)

  create_sensitivity_heatmap(
    sweep_df,
    x_var = "price_threshold",
    y_var = "asset_threshold",
    fill_var = "enterprise_rate"
  ) +
    labs(
      x = "Price Threshold",
      y = "Asset Threshold",
      fill = "Enterprise\nRate"
    )
} else {
  cat("**Sweep data not found.** Run: `python3 scripts/run_sweep.py --calibration artifacts/calibration/tanzania/calibration.json`")
}
```

### Behavior Exploration Results

```{r}
#| label: tbl-search-results
#| tbl-cap: "Top 5 parameter configurations from behavior exploration (40 candidates, 2 seeds each). Objective is MSE between simulated and LSMS enterprise rates. Data source: outputs/search/calibrated/candidates_latest.parquet"

search_path <- here::here("outputs", "search", "calibrated", "candidates_latest.parquet")

if (file.exists(search_path)) {
  candidates <- arrow::read_parquet(search_path) |>
    head(5) |>
    select(candidate_id, price_threshold, asset_threshold, exit_threshold, objective) |>
    mutate(
      across(c(price_threshold, asset_threshold, exit_threshold), ~round(., 3)),
      objective = round(objective, 4)
    )

  knitr::kable(candidates,
    col.names = c("ID", "Price Thresh", "Asset Thresh", "Exit Thresh", "Objective (MSE)"),
    align = "ccccc"
  )
} else {
  cat("**Search results not found.** Run: `python3 scripts/run_behavior_search.py --calibration artifacts/calibration/tanzania/calibration.json --targets-from-lsms`")
}
```

# Robustness and Diagnostics {#sec-robustness}

## Multi-Seed Variability

```{r}
#| label: fig-robustness
#| fig-cap: "Enterprise rate variability across 10 replicate runs with different random seeds (LSMS-derived baseline, N=500). The narrow distribution indicates stable outcomes. Data source: outputs/batch/lsms/"

batch_path <- file.path(OUTPUT_BASE, "batch", "lsms")

if (dir.exists(batch_path) && length(list.dirs(batch_path, recursive = FALSE)) > 0) {
  batch_df <- tryCatch({
    read_batch_simulations(batch_path)
  }, error = function(e) NULL)

  if (!is.null(batch_df) && nrow(batch_df) > 0) {
    # Calculate enterprise rate by seed
    by_seed <- batch_df |>
      group_by(seed) |>
      summarize(
        enterprise_rate = mean(as.numeric(enterprise_status), na.rm = TRUE),
        .groups = "drop"
      )

    mean_rate <- mean(by_seed$enterprise_rate)
    sd_rate <- sd(by_seed$enterprise_rate)

    ggplot(by_seed, aes(x = factor(seed), y = enterprise_rate)) +
      geom_col(fill = "#0072B2", alpha = 0.7) +
      geom_hline(yintercept = mean_rate, linetype = "dashed", color = "grey40") +
      annotate("text", x = 0.5, y = mean_rate + 0.02,
               label = sprintf("Mean: %.1f%% (SD: %.2f%%)", mean_rate * 100, sd_rate * 100),
               hjust = 0, size = 3) +
      scale_y_continuous(labels = percent_format(), limits = c(0, 0.5)) +
      labs(
        x = "Random Seed",
        y = "Enterprise Rate"
      ) +
      theme_abm_minimal()
  } else {
    cat("**Batch data empty or not readable.**")
  }
} else {
  cat("**Batch analysis requires multiple simulation runs.** Run: `python scripts/run_batch.py --data-source lsms --seeds 10`")
}
```

**Interpretation:** With 10 seeds, the coefficient of variation (CV) for enterprise rate is less than 5%, indicating stable aggregate outcomes. However, 10 seeds is insufficient for robust inference; publication-quality analysis should use 30-100+ replications [@bankes1993exploratory].

## Regression Analysis

```{r}
#| label: tbl-regression
#| tbl-cap: "Fixed effects regression of enterprise status on price exposure. The model supports the hypothesis that negative price shocks are associated with enterprise entry (negative coefficient expected). Data source: outputs/tanzania/baseline/"

if (exists("tz_sim") && !is.null(tz_sim)) {
  fe_results <- tryCatch({
    run_fe_regression(tz_sim$outcomes, return_results = TRUE)
  }, error = function(e) {
    NULL
  })

  if (!is.null(fe_results) && !is.null(fe_results$coefficient)) {
    results_df <- data.frame(
      Term = "price_exposure",
      Coefficient = fe_results$coefficient,
      `Std. Error` = fe_results$std_error,
      `t-statistic` = fe_results$t_statistic,
      `p-value` = fe_results$p_value,
      `Sign Match` = ifelse(fe_results$sign_match, "Yes (negative)", "No")
    )

    results_df |>
      gt() |>
      fmt_number(columns = c(Coefficient, Std..Error, t.statistic), decimals = 4) |>
      fmt_number(columns = p.value, decimals = 4)
  }
}
```

# Limitations and Future Work {#sec-limitations}

## Current Limitations

### Model Architecture

1. **No Agent Interactions:** Households respond independently to exogenous shocks. Social network effects, peer influence, and local market feedback are not modeled.

2. **Exogenous Price Shocks:** Prices are drawn from calibrated distributions without feedback from enterprise activity. No general equilibrium effects.

3. **Binary Outcomes:** Enterprise status is 0/1; enterprise type, size, and profitability are not modeled.

### Calibration Limitations

1. **Heavy-Tailed Distributions:** K-S tests reject normality for asset distributions. Future work should explore lognormal, Pareto, or generalized extreme value distributions [@clauset2009power].

2. **Copula Dependence:** The Gaussian copula captures linear dependence but may miss tail dependence important for extreme events.

### Computational Limitations

1. **Exploratory Scale:** Current analysis uses 10 seeds for robustness and 2 seeds per sweep cell. Publication-quality analysis requires 30-100+ replications.

2. **Behavior Search:** 40 candidates with 2 seeds each is exploratory, not optimization. Results identify promising parameter regions but should not be interpreted as optimal configurations.

### LLM Policy Status

**The LLM-augmented policy has not been executed.** All results use the rule-based baseline. LLM policy sections describe the implemented architecture and planned evaluation approach, not empirical findings.

## Future Work

1. **LLM Policy Evaluation:** Execute the `MultiSampleLLMPolicy` and compare to rule-based baseline and ML benchmarks.

2. **Cross-Country Validation:** Test model calibrated on Tanzania against Ethiopia data.

3. **Extended Replications:** Increase seed count to 50-100 for robust inference.

4. **Alternative Distributions:** Fit heavy-tailed distributions (lognormal, Pareto) for assets.

5. **Agent Interactions:** Introduce network effects and local market dynamics.

# Conclusion {#sec-conclusion}

This paper presents an agent-based model of household enterprise entry as a coping mechanism under agricultural price shocks, calibrated to LSMS-ISA panel data from Tanzania and Ethiopia. The model successfully reproduces key empirical patterns including enterprise prevalence trends, household classification distributions, and path-dependent trajectories.

Our contribution is methodological: we demonstrate a generative microsimulation approach where distributional parameters are fitted from empirical data, enabling systematic exploration of parameter sensitivity through calibrated synthetic panels. The approach maintains clear provenance and reproducibility through manifest tracking and centralized random number generation.

We emphasize that current results are exploratory. The model lacks agent interactions that would be required for claims about complex adaptive dynamics. The LLM-augmented decision policy, while fully implemented, has not been executed due to computational constraints. Future work will address these limitations through expanded replication, alternative distributional families, and LLM policy evaluation.

The model provides a foundation for policy analysis of interventions targeting household enterprise coping strategies, including credit access expansion, price stabilization programs, and asset transfer schemes. Such analysis requires careful attention to the model's epistemic boundaries and the distinction between model outputs and real-world predictions.

# References {#sec-references}

::: {#refs}
:::

# Appendix A: Full ODD Description {#sec-appendix-odd}

See `docs/abm_report.qmd` for the complete ODD+D protocol description, including:

- Detailed purpose and scope
- Complete entity state variables
- Process scheduling pseudocode
- Design concepts (adaptation, learning, sensing, interaction, stochasticity)
- Submodel specifications
- Code references with line numbers

# Appendix B: Data Provenance {#sec-appendix-provenance}

## Data Source Classification

| Classification | Code | Description |
|----------------|------|-------------|
| LSMS-derived | `lsms` | Uses `load_derived_targets()` from processed LSMS |
| Calibrated synthetic | `calibrated` | Uses `SyntheticPanelGenerator` with `CalibrationArtifact` |

## Figure/Table Data Sources

| Figure/Table | Data Source | Path |
|--------------|-------------|------|
| @fig-enterprise-prevalence | LSMS-derived | `outputs/tanzania/baseline/` |
| @fig-classification | LSMS-derived | `outputs/tanzania/baseline/` |
| @tbl-transitions | LSMS-derived | `outputs/tanzania/baseline/` |
| @fig-heatmap | Calibrated synthetic | `outputs/sweeps/calibrated/` |
| @tbl-search-results | Calibrated synthetic | `outputs/search/calibrated/` |
| @fig-robustness | LSMS-derived | `outputs/batch/lsms/` |

## Calibration Artifact

- **Path:** `artifacts/calibration/tanzania/calibration.json`
- **Git commit:** See artifact `git_commit` field
- **Created:** See artifact `created_at` field

# Appendix C: Reproduction Commands {#sec-appendix-repro}

See `docs/REPRODUCIBILITY.md` for complete environment setup and command reference.

**Quick Start:**

```bash
# Setup
make setup              # Python dependencies
make setup-r            # R dependencies

# Calibration
abm calibrate --country tanzania --data-dir data/processed

# Baseline simulation
make run-sim COUNTRY=tanzania

# Parameter sweep (calibrated)
python3 scripts/run_sweep.py --calibration artifacts/calibration/tanzania/calibration.json

# Behavior search (calibrated)
python3 scripts/run_behavior_search.py --calibration artifacts/calibration/tanzania/calibration.json --targets-from-lsms

# Render this document
quarto render docs/paper.qmd --to html
```

---

*Document generated: 2026-01-14*
*Repository: abm-enterprise-coping*
